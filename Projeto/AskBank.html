<!DOCTYPE html>
<html lang="pt_BR">
<head>
	<title>AskBank Sistemas</title>
	<meta charset="UTF-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
		h1 {
			font-family: Arial;
			font-size: 30pt;
			text-shadow: 1px 1px 2px grey;
		}
		body{
			font: normal 18pt Arial;
			background-color: rgb(42, 2, 80);
			color: darkgray;

		}
		input{
			font: normal 12pt Arial;
			/*width: 90px;*/
		}
	</style>
</head>

<body>
	<h1>AskBank Correções Inteligentes</h1>
	
	<div#entraMenu id="menu" onclick="entraMenu()">
		
	</div>
	<input type="time">
	<input type="">
	<input type="file" name="Carregar questão" onclick="enviar()">
	<input type="button" value="Enviar" onclick="enviar()">
	<script>
		
		//type="module" src="./ProjetoP1_Rascunho.js";
		// let botao = window.confirm('Deseja adicionar uma questão?')
		// if (botao == true){
		// disciplina = window.prompt('Escolha a disciplina')
		// window.alert('Disciplina ' + disciplina + ' adicionada.')
		// //console.log(disciplina)
		// } else {window.alert('Cancelado')}
		// numero = Number.parseInt(2) + Number.parseFloat(5.5)
		// window.alert(`${numero}`)

		// Adicionado do arquivo .js

		// AskBank: Sistema de Gestão de Banco de Questões

		// Este software é capaz de gerar e corrigir provas de Verdadeiro/Falso
		// de 10 questões por disciplina com base em um array de banco de questões.
		input = require("prompt-sync")();
		console.clear();
		var Questões = [];  // As questões serão armazenadas aqui
		var Prova = [];     // A prova gerada será armazenada aqui

		// --------FUNÇÕES DO MÓDULO PROFESSOR-------- //
		// Cadastro de nova questão no array/BD
		function cadastraQuestão(disciplina){
			questão = {disciplina}
		}
		// Lista todas as questões da disciplina escolhida
		function listaQuestão(disciplina){
			for (var i = 0; i < Questões.length; i++){
				console.log(Questões.disciplina[i])
				}
		}
		// Função para editar uma questão da disciplina escolhida
		function editaQuestão(){
			return questão
			}
			
		// Função para escolher quais questões devem entrar em cada prova gerada
		function escolheQuestão(){
			return ;
			}
			
		// Função de montagem de Prova com 10 questões da disciplina escolhida
		function geraProva(disciplina, montagem){
			while (montagem == "s"){
				for (var i = 0; i < 10; i++){
				return prova = escolheQuestão
				}
			}
		
		// --------FUNÇÕES DO MÓDULO ALUNO-------- //

		function respondeProva(disciplina){

		}


		// CADASTRO DE QUESTÕES
		listaQuestoes = [
			{disciplina: "Matemática", professor: "Simeão", série: "1", assunto: "Geometria Espacial", dificuldade: "1", enunciado: "Qual é o volume de um cubo de aresta 2?", alternativa: [1,8,12,5,7,14,22,50,21,100], resposta: ["F","V","F","F","F","F","F","F","F","F"]},
			{disciplina: "Matemática", professor: "Tammyris", série: "1", assunto: "Geometria Plana", dificuldade: "1", enunciado: "Qual a área de um quadrado de lado 2?", alternativa: [1,4,12], resposta: ["F","V","F"]},
			{disciplina: "História", professor: "Joana", série: "1", assunto: "História do Brasil", dificuldade: "1", enunciado: "Quem descobriu o Brasil", alternativa: ["Fausto Silva","Fernando Henrique Cardoso","Pedro Álvares Cabral", "Tammyris Carvalho", "Marcos Vinícius"], resposta: ["F","F","V","F","F"]},
			{disciplina: "História", professor: "Aristides", série: "1", assunto: "História do Brasil", dificuldade: "1", enunciado: "Quais dos seguintes imperadores governaram o Brasil?", alternativa: ["Dom João VI","Dom Francisco Brasileiro","Dom Pedro II", "Rei Leônidas", "Ulisses de Morais"], resposta: ["V","F","V","F","F"]},
			{disciplina: "Inglês", professor: "Smith", série: "1", assunto: "To be present", dificuldade: "1", enunciado: "It ___ raining outside, but the kids ___ playing there, while i ___ here inside", alternativa: ["is - is - are","is - are - are","is - are - am", "am - are - is", "are - are - am"], resposta: ["F","V","F","F","F"],
			{disciplina: "Inglês", professor: "Smith", série: "1", assunto: "Auxiliar verbs", dificuldade: "1", enunciado: "My name ___ Johnathan, and i ___ two siblings, my sister's name ___ Ana and my brother's name ___ Nicholas", alternativa: ["is - have - is - is","are - were - is - are","am - will - is", "am - are - is - am", "are - are - am - is"], resposta: ["V","F","F","F","F"]
		]

		//-------------------------------------------------------------------------------------------------------
		// ELABORAÇÃO DA PROVA

		// Seleção da disciplina
		var nomeDisciplina = input("Digite o nome da disciplina da prova: ");

		// // Especificação das características da questão
		var sérieDisciplina = input("Digite a série: ");
		var assuntoDisciplina = input("Digite o assunto: ");
		var dificuldadeDisciplina = input("Digite a dificuldade da questão: ");
		var quantidadeAlternativas = input("Digite o número de opções na questão: ");

		// // Busca das questões elegíveis + Sorteio de uma para ser utilizada 
		var questoesElegiveis = [];
		j=0;

		for (var i = 0; i <= 2; i++) {
			if ((listaQuestoes[i].disciplina == nomeDisciplina) && (listaQuestoes[i].série == sérieDisciplina) &&
			(listaQuestoes[i].assunto == assuntoDisciplina) && (listaQuestoes[i].dificuldade == dificuldadeDisciplina)) {
				questoesElegiveis[j]=listaQuestoes[i];
				j++;
			}
		}

		var pos = Math.floor(Math.random() * questoesElegiveis.length);
		questaoSorteada = {
		}
		console.log(questaoSorteada);
		var questaoSorteada = questoesElegiveis[pos];

		// Sorteio das alternativas para a questão sorteada

		// questaoProva = questaoSorteada.alternativa
		var listaPosicoes = [];

		qtdAlternativas = questaoSorteada.alternativa.length;
		for (var i = 0; i < quantidadeAlternativas; i++){
			posOpcao = Math.floor(Math.random() * qtdAlternativas);
			listaPosicoes[i] = posOpcao;
		}

		//Resolvendo a repetição das alternativas no vetor das opções de resposta
		while (listaPosicoes.indexOf(posOpcao)>=0){ //Se o indexof retorna negativo é porque o elemento não está presente, logo se é >=0 ele já se encontra.
			posOpcao = Math.floor(Math.random() * qtdAlternativas) //enquanto for elemento repetido ele faz novamente a randomização
		}

		questaoProva = {
			enunciado : "",
			alternativa : []
		};

		gabaritoQuestaoProva ={
			gabarito : []
		}

		questaoProva.enunciado = questaoSorteada.enunciado;
		for (var k = 0; k < listaPosicoes.length; k++){
			questaoProva.alternativa[k] = questaoSorteada.alternativa[listaPosicoes[k]];
			gabaritoQuestaoProva.gabarito[k] = questaoSorteada.resposta[listaPosicoes[k]]
		}
		console.log(questaoProva);

		//-------------------------------------------------------------------------------------------------------
		//CORREÇÃO DA PROVA 

		respostaProva = {
			resposta: []
		}

		for(var k = 0; k < listaPosicoes.length;k++){
			respostaProva.resposta[k] = input("Digite a resposta: ")
			if (respostaProva.resposta[k] == gabaritoQuestaoProva.gabarito[k]){
				console.log("Correto")
			}
			else {
				console.log("Incorreto")
			}
		}
	</script>
</body>
</html>
